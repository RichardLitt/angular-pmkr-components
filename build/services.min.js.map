{"version":3,"file":"services.min.js","sources":["services.js","debounce\\debounce.js","filterStabilize\\filterStabilize.js","memoize\\memoize.js","rethrowException\\rethrowException.js"],"names":[],"mappings":"AAAA,QAAA,OAAA,4BACA,gBACA,eACA,uBACA,0BCJA,QAAA,OAAA,oBAEA,QAAA,iBACA,WACA,KACA,SAAA,EAAA,GAYA,QAAA,GAAA,EAAA,GAIA,QAAA,KAEA,GAAA,GAAA,EAAA,QAEA,EAAA,KACA,EAAA,SAQA,OANA,GAAA,OAAA,GAEA,EAAA,EAAA,WACA,EAAA,QAAA,EAAA,MAAA,EAAA,KACA,GAEA,EAAA,QAfA,GAAA,EAmBA,OAAA,GAIA,QAAA,GAAA,EAAA,GAIA,QAAA,KAEA,GAAA,GAAA,EAAA,QAEA,EAAA,KACA,EAAA,SAYA,OAVA,IACA,EAAA,QAAA,EAAA,MAAA,EAAA,IAIA,EAAA,OAAA,GACA,EAAA,EAAA,WACA,EAAA,MACA,GAEA,EAAA,QAnBA,GAAA,EAuBA,OAAA,GAIA,QAAA,GAAA,GAIA,QAAA,KAEA,GAAA,GAAA,EAAA,KAAA,UAAA,WAEA,EAAA,EAAA,OAYA,OAVA,GAAA,MAAA,KAAA,WAAA,KAAA,SAAA,GACA,IAAA,GACA,EAAA,QAAA,IAEA,SAAA,GACA,IAAA,GACA,EAAA,OAAA,KAIA,EAAA,QAlBA,GAAA,EAsBA,OAAA,GAxFA,GAAA,GAAA,WACA,MAAA,GAAA,MAAA,KAAA,WA2FA,OAzFA,GAAA,UAAA,WACA,MAAA,GAAA,MAAA,KAAA,YAEA,EAAA,OAAA,WACA,MAAA,GAAA,MAAA,KAAA,YAqFA,KCnGA,QAAA,OAAA,wBACA,iBAGA,QAAA,wBACA,eACA,SAAA,GAEA,QAAA,GAAA,GAEA,QAAA,KACA,GAAA,MAAA,MAAA,KAAA,UAEA,GAAA,QAAA,KAAA,EAEA,IAAA,GAAA,EAAA,MAAA,KAAA,IAAA,EAAA,EACA,OAAA,GAGA,GAAA,GAAA,EAAA,EAEA,OAAA,GAIA,MAAA,MCzBA,QAAA,OAAA,mBAEA,QAAA,gBACA,WAEA,QAAA,KACA,MAAA,GAAA,MAAA,KAAA,WAGA,QAAA,GAAA,GAIA,QAAA,KAEA,GAAA,MAAA,MAAA,KAAA,WAEA,EAAA,KAAA,UAAA,GAEA,EAAA,EAAA,EACA,OAAA,GACA,GAGA,EAAA,GAAA,EAAA,MAAA,KAAA,WAEA,EAAA,IAfA,GAAA,KAmBA,OAAA,GAIA,MAAA,MClCA,QAAA,OAAA,4BAEA,SAAA,yBACA,WACA,SAAA,GASA,QAAA,GAAA,GAEA,QAAA,GAAA,EAAA,GAEA,KADA,GAAA,EAAA,GACA,EAGA,MAAA,GAdA,KAAA,KAAA,WACA,EAAA,UAAA,qBACA,YACA,KAeA,KAAA,KAAA","sourcesContent":["angular.module('pmkr.components.services', [\r\n  'pmkr.debounce',\r\n  'pmkr.memoize',\r\n  'pmkr.filterStabilize',\r\n  'pmkr.rethrowException'\r\n]);","angular.module('pmkr.debounce', [])\r\n\r\n.factory('pmkr.debounce', [\r\n  '$timeout',\r\n  '$q',\r\n  function($timeout, $q) {\r\n\r\n    var service = function() {\r\n      return debounceFactory.apply(this, arguments);\r\n    };\r\n    service.immediate = function() {\r\n      return debounceImmediateFactory.apply(this, arguments);\r\n    };\r\n    service.latest = function() {\r\n      return debounceLatestFactory.apply(this, arguments);\r\n    };\r\n\r\n    function debounceFactory(fn, wait) {\r\n\r\n      var timeoutPromise;\r\n\r\n      function debounced() {\r\n\r\n        var deferred = $q.defer();\r\n\r\n        var context = this;\r\n        var args = arguments;\r\n\r\n        $timeout.cancel(timeoutPromise);\r\n\r\n        timeoutPromise = $timeout(function() {\r\n          deferred.resolve(fn.apply(context, args));\r\n        }, wait);\r\n\r\n        return deferred.promise;\r\n\r\n      }\r\n\r\n      return debounced;\r\n\r\n    }\r\n\r\n    function debounceImmediateFactory(fn, wait) {\r\n\r\n      var timeoutPromise;\r\n\r\n      function debounced() {\r\n\r\n        var deferred = $q.defer();\r\n\r\n        var context = this;\r\n        var args = arguments;\r\n\r\n        if (!timeoutPromise) {\r\n          deferred.resolve(fn.apply(context, args));\r\n          // return here?\r\n        }\r\n\r\n        $timeout.cancel(timeoutPromise);\r\n        timeoutPromise = $timeout(function() {\r\n          timeoutPromise = null;\r\n        }, wait);\r\n\r\n        return deferred.promise;\r\n\r\n      }\r\n\r\n      return debounced;\r\n\r\n    }\r\n\r\n    function debounceLatestFactory(fn) {\r\n\r\n      var latestArgs;\r\n\r\n      function debounced() {\r\n\r\n        var args = latestArgs = JSON.stringify(arguments);\r\n\r\n        var deferred = $q.defer();\r\n\r\n        fn.apply(this, arguments).then(function(res) {\r\n          if (latestArgs === args) {\r\n            deferred.resolve(res);\r\n          }\r\n        }, function(res) {\r\n          if (latestArgs === args) {\r\n            deferred.reject(res);\r\n          }\r\n        });\r\n\r\n        return deferred.promise;\r\n\r\n      }\r\n\r\n      return debounced;\r\n\r\n    }\r\n\r\n    return service;\r\n\r\n  }\r\n])\r\n\r\n;","angular.module('pmkr.filterStabilize', [\r\n  'pmkr.memoize'\r\n])\r\n\r\n.factory('pmkr.filterStabilize', [\r\n  'pmkr.memoize',\r\n  function(memoize) {\r\n\r\n    function service(fn) {\r\n\r\n      function filter() {\r\n        var args = [].slice.call(arguments);\r\n        // always pass a copy of the args so that the original input can't be modified\r\n        args = angular.copy(args);\r\n        // return the `fn` return value or input reference (makes `fn` return optional)\r\n        var filtered = fn.apply(this, args) || args[0];\r\n        return filtered;\r\n      }\r\n\r\n      var memoized = memoize(filter);\r\n\r\n      return memoized;\r\n\r\n    }\r\n\r\n    return service;\r\n\r\n  }\r\n])\r\n\r\n;","angular.module('pmkr.memoize', [])\r\n\r\n.factory('pmkr.memoize', [\r\n  function() {\r\n\r\n    function service() {\r\n      return memoizeFactory.apply(this, arguments);\r\n    }\r\n\r\n    function memoizeFactory(fn) {\r\n\r\n      var cache = {};\r\n\r\n      function memoized() {\r\n\r\n        var args = [].slice.call(arguments);\r\n\r\n        var key = JSON.stringify(args);\r\n\r\n        var fromCache = cache[key];\r\n        if (fromCache) {\r\n          return fromCache;\r\n        }\r\n\r\n        cache[key] = fn.apply(this, arguments);\r\n\r\n        return cache[key];\r\n\r\n      }\r\n\r\n      return memoized;\r\n\r\n    } // end service function\r\n\r\n    return service;\r\n\r\n  }\r\n])\r\n\r\n;","angular.module('pmkr.rethrowException', [])\r\n\r\n.provider('pmkr.rethrowException', [\r\n  '$provide',\r\n  function($provide) {\r\n\r\n    this.init = function() {\r\n      $provide.decorator('$exceptionHandler', [\r\n        '$delegate',\r\n        decorator\r\n      ]);\r\n    };\r\n\r\n    function decorator($delegate) {\r\n\r\n      function decorated(exception, cause) {\r\n        $delegate(exception, cause);\r\n        throw exception;\r\n      }\r\n\r\n      return decorated;\r\n\r\n    }\r\n\r\n    this.$get = function() {};\r\n\r\n  }\r\n])\r\n\r\n;"],"sourceRoot":"/source/"}