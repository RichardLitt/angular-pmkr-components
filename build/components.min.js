/*
pmkr.components v0.0.0
https://github.com/m59peacemaker/angular-pmkr-components
License: MIT
Author: Johnny Hauser
File created: 9.3.2014
*/

angular.module("pmkr.components",["pmkr.components.filters","pmkr.components.services","pmkr.components.directives"]),angular.module("pmkr.componentsSamples",["ui.router"]),angular.module("pmkr.components.directives",["pmkr.pristineOriginal","pmkr.validateCustom"]),angular.module("pmkr.components.filters",["pmkr.offset","pmkr.partition","pmkr.shuffle","pmkr.slugify","pmkr.stripTags","pmkr.spaceSentences","pmkr.limitEllipsis"]),angular.module("pmkr.components.services",["pmkr.debounce","pmkr.memoize","pmkr.filterStabilize","pmkr.rethrowException"]),angular.module("pmkr.pristineOriginal",[]).directive("pmkrPristineOriginal",[function(){var r={restrict:"A",require:"ngModel",link:function(r,e,n,t){var i=null;r.$watch(function(){return t.$viewValue},function(r){null===i&&(i=t.$isEmpty(r)?"":r.toString()),i===r&&t.$setPristine()})}};return r}]),angular.module("pmkr.validateCustom",["pmkr.debounce"]).directive("pmkrValidateCustom",["$q","pmkr.debounce",function(r,e){var n={restrict:"A",require:"ngModel",priority:1,link:function(r,n,t,i){function u(r){return p?void 0:(l.validating=!0,o.fn(r))}function a(r){return l.valid=l.invalid=!1,o.gate&&(p=o.gate(r,i))?void(l.pending=l.validating=!1):(l.pending=!0,void s(r).then(function(e){p||(l.checkedValue=r,m=l.valid=e,l.invalid=!m,i.$validate(),l.pending=l.validating=!1)}))}var o=r.$eval(t.pmkrValidateCustom),l={};o.props&&(r[o.props]=l);var m=!0,p=!1;i.$validators[o.name]=function(){return m};var c=e(u,o.wait),s=e.latest(c);r.$watch(function(){return i.$viewValue},a)}};return n}]),angular.module("pmkr.limitEllipsis",["pmkr.stripTags","pmkr.spaceSentences"]).filter("pmkr.limitEllipsis",["$filter",function(r){function e(r,e,u){if(!r||!r.length)return r;u=u||"...";var a=t(n(r)),o=i(a,e);return o===a?o:o+u}var n=r("pmkr.stripTags"),t=r("pmkr.spaceSentences"),i=r("limitTo");return e}]),angular.module("pmkr.offset",[]).filter("pmkr.offset",[function(){function r(r,e){return r&&r.length?(e=parseInt(e,10),r.slice(e)):r}return r}]),angular.module("pmkr.partition",["pmkr.filterStabilize"]).filter("pmkr.partition",["pmkr.filterStabilize",function(r){var e=r(function(r,e){if(!r||!e)return r;for(var n=[],t=0;t<r.length;t+=e)n.push(r.slice(t,t+e));return n});return e}]),angular.module("pmkr.shuffle",["pmkr.filterStabilize"]).filter("pmkr.shuffle",["pmkr.filterStabilize",function(r){function e(r){for(var e=r.length;0!==e;){var n=Math.floor(Math.random()*e);e-=1;var t=r[e];r[e]=r[n],r[n]=t}return r}var n=r(function(r){return r?"string"==typeof r?(r=r.split(""),e(r),r.join("")):void e(r):r});return n}]),angular.module("pmkr.slugify",[]).filter("pmkr.slugify",[function(){function r(r){if(!r)return r;var e=r.toLowerCase().replace(/ /g,"-").replace(/[^\w-]+/g,"");return e}return r}]),angular.module("pmkr.spaceSentences",[]).filter("pmkr.spaceSentences",[function(){function r(r){if(!r)return r;var e=r.replace(/(\w)([.!?]+)(\w)/gi,"$1$2 $3");return e}return r}]),angular.module("pmkr.stripTags",[]).filter("pmkr.stripTags",function(){function r(r,e,n){if(!r)return r;e=e?e.split(","):"";var t=/<\/?([a-z][a-z0-9]*)\b[^>]*>/gi,i=r.replace(t,function(r,t){var i=~e.indexOf(t.toLowerCase()),u=n?i:!i,a=u?"":r;return a});return i}return r}),angular.module("pmkr.debounce",[]).factory("pmkr.debounce",["$timeout","$q",function(r,e){function n(n,t){function i(){var i=e.defer(),a=this,o=arguments;return r.cancel(u),u=r(function(){i.resolve(n.apply(a,o))},t),i.promise}var u;return i}function t(n,t){function i(){var i=e.defer(),a=this,o=arguments;return u||i.resolve(n.apply(a,o)),r.cancel(u),u=r(function(){u=null},t),i.promise}var u;return i}function i(r){function n(){var n=t=JSON.stringify(arguments),i=e.defer();return r.apply(this,arguments).then(function(r){t===n&&i.resolve(r)},function(r){t===n&&i.reject(r)}),i.promise}var t;return n}var u=function(){return n.apply(this,arguments)};return u.immediate=function(){return t.apply(this,arguments)},u.latest=function(){return i.apply(this,arguments)},u}]),angular.module("pmkr.filterStabilize",["pmkr.memoize"]).factory("pmkr.filterStabilize",["pmkr.memoize",function(r){function e(e){function n(){var r=[].slice.call(arguments);r=angular.copy(r);var n=e.apply(this,r)||r[0];return n}var t=r(n);return t}return e}]),angular.module("pmkr.memoize",[]).factory("pmkr.memoize",[function(){function r(){return e.apply(this,arguments)}function e(r){function e(){var e=[].slice.call(arguments),t=JSON.stringify(e),i=n[t];return i?i:(n[t]=r.apply(this,arguments),n[t])}var n={};return e}return r}]),angular.module("pmkr.rethrowException",[]).provider("pmkr.rethrowException",["$provide",function(r){function e(r){function e(e,n){throw r(e,n),e}return e}this.init=function(){r.decorator("$exceptionHandler",["$delegate",e])},this.$get=function(){}}]),angular.module("pmkr.componentsSamples").controller("ValidateCustomController",function(r,e,n){function t(){var r=["m59peacemaker","SomeKittens","Jhawins","SterlingArcher","rlemon","Benjamin","Florian","phenom","Loktar","Zirak"];return r}r.user.userName="myUserName",r.checkUserNameUnique=function(r){var i=e.defer();return n(function(){var e=!~t.indexOf(r);i.resolve(e)},250),i.promise},r.userNameUniqueGate=function(r,e){return!r||e.$pristine}});
//# sourceMappingURL=components.min.js.map